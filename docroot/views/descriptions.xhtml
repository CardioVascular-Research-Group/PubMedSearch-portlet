<f:view
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
>

<h:form id="describefileafterupload2" >  
		
	<p>For each uploaded file:</p>
	<ul>
		<li>For files that were previously uploaded, you may edit the figure, panel, and description fields as needed.</li>
		<li>If the data file you have uploaded corresponds to a single figure, please enter the figure number and panel label(s) in the corresponding fields below.</li>
		<li>If the data file you have uploaded corresponds to more than one figure, please enter the figure number and panel label(s) of the first figure in the corresponding fields below, and enter the additional figures and panel labels in the corresponding description field.</li>
		<li>For files containing data that are referenced in the text or as "data not shown", please use the description field to indicate the page number or section title corresponding to the in-text reference.</li>
	</ul>
	<p>You can access this publication in the future by selecting View My Publications in the top menu.</p>
	
	<p:dataTable  styleClass="pubFileTable" var="mfiles" rowKey="#{mfiles.index}" value="#{pubMedSearch.allfiles}" id="editList" editable="true" editMode="cell" paginator="true" rows="15" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,15,25" >       
	 		<f:facet name="header">  
	            File Descriptions
	        </f:facet>  
	        <p:column headerText="Filename" styleClass="pubFilenameTd" style="width:18%">  
	            <h:outputText value="#{mfiles.filename}" />
	        </p:column>  
	        <p:column headerText="Figure Number" style="width:8%">   
	            <p:inputText value="#{mfiles.figure}"  styleClass="pubFileInfoCell" label="Figure"/>  
	        </p:column> 
	        <p:column headerText="Panel Number" style="width:8%">  
	            <p:inputText value="#{mfiles.panel}"  styleClass="pubFileInfoCell" label="Panel"/>  
	        </p:column>  
	        <p:column headerText="Description" style="width:41%">  
	            <p:inputText value="#{mfiles.description}"  styleClass="pubFileInfoCell" label="Description"/>  
	        </p:column>  
	        <p:column headerText="Error Messages" styleClass="pubErrorTd" style="width:25%; background-color:#BFBFCB" >  
	        	<h:outputText value="#{mfiles.message}" style="color: red"/>  
	        </p:column> 
  		 	<f:facet name="footer">  
		        <p:commandButton value="Save Progress and Store All Data Entered" actionListener="#{pubMedSearch.handleFileSavePoint2}" update=":describefileafterupload2:messages"/>
	      	</f:facet>  
	    </p:dataTable>  
	 
	<p style="margin-top:15px;">
		<p:commandButton style="font-weight: bold;" value="Save Progress and Set Publication to Visible" id="movetstep" validateClient="true" action="#{pubMedSearch.moveStep(6)}" /><br/>
		<span style="color:red;">Selecting this button will update the record on CEP Tools and make it visible to all users. You may return to this record to add new files and/or modify descriptions in the future by selecting View My Publications in the top menu.</span>
	</p>
	<p>
		<p:commandButton value="Save Progress and Start a New Entry" actionListener="#{pubMedSearch.handleFileSavePoint4}" update="messages"/><br/>
		Click to save your progress, store this publication record to your account, and start a new entry. You may access this record to add new files and/or modify descriptions in the future by selecting View My Publications in the top menu.
	</p>
	<p>		
		<p:commandButton value="Back: Upload More Files" id="movebstep" validateClient="true" action="#{pubMedSearch.moveStep(5)}" update=":describefileafterupload2:editList" />
	</p>	
	<p>Please do NOT use your browser's back button at any time during the upload process.</p>
	<p:growl id="messages" life="10000" showDetail="true"/>  
	<p:growl id="messages2" life="10000" showDetail="true"/>		
	
</h:form>

</f:view>